<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing Awareness Manga | TCC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap');
        
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #f5f5f5;
            background-image: url('https://www.transparenttextures.com/patterns/rice-paper-3.png');
        }
        
        .manga-panel {
            background-color: white;
            border: 3px solid #333;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
            position: relative;
        }
        
        .manga-panel::after {
            content: "";
            position: absolute;
            bottom: -10px;
            right: -10px;
            width: 100%;
            height: 100%;
            background-color: #333;
            z-index: -1;
            opacity: 0.3;
        }
        
        .speech-bubble {
            position: relative;
            background: white;
            border: 2px solid #333;
            border-radius: 20px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: #333;
            border-bottom: 0;
            margin-left: -10px;
        }
        
        .character {
            filter: drop-shadow(3px 3px 0 rgba(0,0,0,0.2));
        }
        
        .page-turn {
            animation: pageTurn 0.5s ease-out;
        }
        
        @keyframes pageTurn {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }
        
        .manga-nav {
            background-color: #e74c3c;
            color: white;
            border-bottom: 3px solid #333;
        }
        
        .manga-btn {
            background-color: #e74c3c;
            color: white;
            border: 2px solid #333;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        
        .manga-btn:hover {
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0 rgba(0,0,0,0.2);
        }
        
        .progress-bar {
            height: 10px;
            background-color: #ddd;
            border: 2px solid #333;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #e74c3c;
            transition: width 0.3s ease;
        }
        
        .manga-title {
            text-shadow: 3px 3px 0 rgba(0,0,0,0.2);
            letter-spacing: -1px;
        }
        
        .sound-effect {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-weight: 800;
            color: #e74c3c;
            transform: rotate(-5deg);
            display: inline-block;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
        }
        
        .nav-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: white;
            border: 2px solid #333;
            margin-right: 10px;
        }
        /* Added for flashy unmute button */
        /* @keyframes flashyGlow {
            0% { box-shadow: 0 0 5px #FFCC33, 0 0 10px #FFCC33; }
            50% { box-shadow: 0 0 15px #FFCC33, 0 0 25px #FFCC33, 0 0 5px #FFD700 inset; }
            100% { box-shadow: 0 0 5px #FFCC33, 0 0 10px #FFCC33; }
        } */
        /* .unmuted-flashy {
            animation: flashyGlow 1.5s infinite;
            border-color: #FFCC33 !important; /* TCC Gold border for emphasis */
        /* } */

        @keyframes flashyGlow {
          0%, 100% {
            /* Start/end state - subtle glow */
            box-shadow: 0 0 8px 3px rgba(255, 204, 51, 0.6); /* TCC Gold */
          }
          50% {
            /* Mid state - brighter/wider glow */
            box-shadow: 0 0 16px 6px rgba(255, 204, 51, 0.9); /* Brighter TCC Gold */
          }
        }

        /* Class to apply the animation */
        .unmuted-flashy {
          animation: flashyGlow 1.5s infinite ease-in-out;
          /* Ensure consistent base style even without animation */
           border: 2px solid #FFCC33; /* TCC Gold */
        }
    </style>
    <style>
        body {
            background-color: #f5f5f5; /* Neutral background */
            /* Ensure rice-paper-3.png background is applied if intended, via body or a wrapper */
        }

        .manga-nav {
            background-color: #003366 !important; /* TCC Blue */
            color: white !important;
            border-bottom: 3px solid #FFCC33 !important; /* TCC Gold */
        }

        .manga-nav h1, .manga-nav .fas {
            color: white !important;
        }
        #soundToggle {
            background-color: white !important;
            /* color: #003366 !important; TCC Blue icon on white bg */
            /* transition: box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out; /* Smooth transition for glow */
            transition: box-shadow 0.3s ease, border 0.3s ease; /* Smooth transition when class is removed */
            position: relative; /* Needed for some shadow effects */
        }
        #soundToggle .fas.fa-volume-up {
            color: #FFCC33 !important; /* TCC Gold for unmuted icon */
        }
        #soundToggle .fas.fa-volume-mute {
            color: #003366 !important; /* TCC Blue for muted icon */
        }

        .manga-btn {
            background-color: #003366 !important; /* TCC Blue */
            color: white !important;
            border: 2px solid #003366 !important;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.15) !important;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
        }

        .manga-btn:hover {
            background-color: #004488 !important; /* Darker TCC Blue */
            border-color: #FFCC33 !important; /* TCC Gold border on hover */
        }
        .manga-btn.disabled\:opacity-50:disabled {
            background-color: #003366 !important; /* Keep base color */
            color: white !important;
            opacity: 0.5 !important;
            border-color: #003366 !important;
        }


        .progress-bar {
            background-color: #C6CDD1; /* TCC Secondary Gray for track */
        }
        .progress-fill {
            background-color: #FFCC33 !important; /* TCC Gold */
            height: 100%;
        }

        .manga-panel {
            background-color: white !important;
            border: 2px solid #003366 !important; /* TCC Blue border */
            box-shadow: 3px 3px 5px rgba(0,0,0,0.1);
        }

        .manga-title { /* Applied to h2 titles in panels */
            color: #003366 !important; /* TCC Blue */
            text-shadow: 1px 1px 0px #E6EBF2; /* Subtle light blue/gold shadow */
        }

        .sound-effect {
            color: #FFCC33 !important; /* TCC Gold */
            text-shadow: 1px 1px 0 #003366; /* TCC Blue shadow */
            font-weight: bold;
        }

        /* Speech Bubble Base Style */
        .speech-bubble {
            background-color: white !important;
            border: 2px solid #003366 !important; /* TCC Blue border */
            padding: 1rem;
            border-radius: 0.5rem;
        }

        /* Custom Speech Bubble Variations */
        .speech-bubble-info-gold { /* Replaces bg-yellow-100 */
            background-color: #FFF9E6 !important; /* Pale TCC Gold */
            border-color: #FFCC33 !important;
        }
        .speech-bubble-info-blue { /* Replaces bg-blue-100 */
            background-color: #E6EBF2 !important; /* Pale TCC Blue */
            border-color: #003366 !important;
        }
        .speech-bubble-positive { /* Replaces bg-green-100 */
            background-color: #E6F2E6 !important; /* Light green, or use pale gold/blue */
            border-color: #006633 !important; /* Darker green border */
        }
        .speech-bubble-alert { /* Replaces bg-red-100 */
            background-color: #FFE0CC !important; /* Light TCC Secondary Orange tint */
            border-color: #FF6600 !important; /* TCC Secondary Orange border */
        }


        .nav-icon { /* Tutorial page nav icons container */
            background-color: white !important;
            border: 1px solid #003366 !important; /* TCC Blue border */
            color: #003366 !important; /* Icon color */
            padding: 0.5rem;
            border-radius: 0.25rem;
            margin-right: 0.75rem;
            width: 2.5rem; /* Fixed width for alignment */
            height: 2.5rem; /* Fixed height for alignment */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-icon > .fas { /* Icon color inside .nav-icon */
            color: #003366 !important; /* TCC Blue */
        }
        
        /* Page number span styling */
        .page-number-span {
            background-color: #E6EBF2 !important; /* Pale TCC Blue */
            color: #003366 !important; /* TCC Blue text */
            padding: 0.25rem 0.75rem;
            border-radius: 9999px; /* pill shape */
            font-weight: bold;
            font-size: 0.875rem;
        }

        /* Specific Button Overrides */
        #page11 .manga-btn[onclick="prevPage()"] + .manga-btn { /* Complete training button */
            background-color: #FFCC33 !important; /* TCC Gold */
            color: #003366 !important; /* TCC Blue text */
            border-color: #003366 !important; /* TCC Blue border */
        }
        #page11 .manga-btn[onclick="prevPage()"] + .manga-btn:hover {
            background-color: #E6B800 !important; /* Darker TCC Gold */
            color: #003366 !important;
        }

        #page12 .manga-btn[onclick="prevPage()"] + .manga-btn { /* Complete training button */
            background-color: #FFCC33 !important; /* TCC Gold */
            color: #003366 !important; /* TCC Blue text */
            border-color: #003366 !important; /* TCC Blue border */
        }
        #page12 .manga-btn[onclick="prevPage()"] + .manga-btn:hover {
            background-color: #E6B800 !important; /* Darker TCC Gold */
            color: #003366 !important;
        }

        #confirmResetProgressBtn {
            background-color: #FFCC33 !important; /* TCC Gold */
            color: #003366 !important; /* TCC Blue text */
            border-color: #003366 !important; /* TCC Blue border */
        }
        #confirmResetProgressBtn:hover {
            background-color: #E6B800 !important; /* Darker TCC Gold */
        }
        #cancelResetProgressBtn {
            background-color: #C6CDD1 !important; /* TCC Secondary Gray */
            color: #003366 !important; /* TCC Blue text */
            border-color: #003366 !important;
        }
        #cancelResetProgressBtn:hover {
            background-color: #A9B2B7 !important; /* Darker Gray */
        }

        /* Ensure pop-up titles are TCC Blue */
        #senseiPopup .manga-title,
        #quizFeedbackPopup .manga-title,
        #resetConfirmPopup .manga-title {
            color: #003366 !important;
        }

        /* Completion Pop-up Style */
        #completionPopup .manga-title {
            color: #003366 !important;
        }
        #completionPopup .manga-btn {
            background-color: #003366 !important;
            color: white !important;
        }
        #completionPopup .manga-btn:hover {
            background-color: #004488 !important;
        }

        footer {
            background-color: #E6EBF2; /* Pale TCC Blue */
            color: #003366; /* TCC Blue */
            text-align: center;
            padding: 1rem;
            margin-top: 2rem;
            font-size: 0.875rem;
            border-top: 2px solid #003366; /* TCC Blue border */
        }

        /* Added for Character Portraits Feature */
        .character-portrait {
          width: 96px; /* Set desired width (Tailwind w-24 equivalent) */
          height: auto; /* CRITICAL: Let height adjust automatically */
          display: block; /* Good practice for images to avoid extra space */
          object-fit: contain; /* Ensures the whole image fits */
          /* Removed fixed height, background-color, and flex-shrink */
        }

        /* Modify ::after for speech bubbles with a portrait on the left */
        .speech-bubble.speech-bubble-with-portrait.portrait-left::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;

            /* Override properties from original .speech-bubble::after */
            bottom: auto;       /* Original was -10px or similar */
            margin-left: 0;     /* Original was -10px or similar */
            border-top-color: transparent; /* Original might have had a color */
            /* Ensure other border-* properties are explicitly set for the new tail shape */
            border-right-color: #003366; /* Color for the part of the tail pointing left */
            border-bottom-color: transparent;
            border-left-color: transparent;


            /* New properties for left-pointing tail */
            top: 20px;  /* Adjust for vertical alignment */
            left: -10px; /* Makes the base of the tail sit on the left border. Tail length is 10px. */
            border-width: 8px 10px 8px 0; /* top_height, right_length_and_direction, bottom_height, left_0 */
                                          /* Creates a tail 10px long, 16px total height */
        }
        /* End Added for Character Portraits Feature */

    </style>
</head>
<body class="min-h-screen">
    <audio id="bgAudio" loop preload="auto">
        <source src="audio/manga_theme.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <audio id="nextPageSound" preload="auto">
        <source src="audio/Next Page.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <audio id="prevPageSound" preload="auto">
        <source src="audio/Back Page.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <!-- Navigation -->
    <nav class="manga-nav py-4 px-6 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center">
            <img src="img/T-Swoosh.png" alt="TCC Logo" class="h-8 w-auto mr-3"> <!-- Replaced icon with TCC T-Swoosh -->
            <h1 class="text-xl font-bold">Phishing Awareness Manga</h1>
        </div>
        <div class="flex items-center space-x-4">
            <button id="soundToggle" class="p-2 rounded-full bg-white text-red-600">
                <i class="fas fa-volume-up"></i>
            </button>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5" class="w-20 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
            <button id="homeNavButton" class="manga-btn px-4 py-2 rounded-md font-bold">
                <i class="fas fa-home mr-2"></i> Home
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="progress-bar rounded-full mb-2 h-4">
                <div id="progressFill" class="progress-fill rounded-full" style="width: 0%"></div>
            </div>
            <div class="flex justify-between text-sm font-bold">
                <span id="progressText">0% Complete</span> <!-- Changed span for progress text -->
                <span id="pageCount">Welcome</span> <!-- Initial page count text -->
            </div>
        </div>

        <!-- Manga Content -->
        <div id="mangaContent" class="grid grid-cols-1 md:grid-cols-2 gap-8"> <!-- md:grid-cols-2 might be an issue if only one panel is shown -->
            <!-- Page 1 - Welcome/Title Page (NEW) -->
            <div id="page1" class="manga-panel p-6 page-turn">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-3xl font-bold manga-title">Welcome to TCC Phishing Awareness</h2>
                    <span class="page-number-span">Welcome</span>
                </div>
                <div class="text-center mb-6">
                    <img src="img/T-Swoosh.png" alt="TCC Logo" class="w-1/2 mx-auto mb-4">
                </div>
                <div class="speech-bubble speech-bubble-info-gold text-center">
                    <p><span class="sound-effect">KON!</span> <span class="font-bold">Learn to protect yourself and TCC from cyber threats!</span></p>
                    <p class="mt-2">This interactive manga will guide you through the essentials of identifying and reporting phishing attempts.</p>
                </div>
                <div class="mt-8 flex justify-center">
                    <button onclick="nextPage()" class="manga-btn px-8 py-3 rounded-md font-bold text-lg">
                        Start Training <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Page 2 - Tutorial (Old Page 1) -->
            <div id="page2" class="manga-panel p-6 hidden"> <!-- Was page1 -->
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-3xl font-bold manga-title">How to Navigate This Manga</h2>
                    <span class="page-number-span">Tutorial</span> <!-- Updated span -->
                </div>
                
                <div class="grid grid-cols-1 gap-6">
                    <div class="speech-bubble speech-bubble-info-gold">
                        <p><span class="sound-effect">KON!</span> <span class="font-bold">Welcome to our interactive phishing awareness manga!</span></p>
                        <p>Here's how to navigate through the story:</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <div class="flex items-start mb-4">
                                <div class="nav-icon">
                                    <i class="fas fa-arrow-left text-red-600"></i>
                                </div>
                                <div>
                                    <p class="font-bold">Back Button</p>
                                    <p class="text-sm">Go to the previous page</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start mb-4">
                                <div class="nav-icon">
                                    <i class="fas fa-arrow-right text-red-600"></i>
                                </div>
                                <div>
                                    <p class="font-bold">Next Button</p>
                                    <p class="text-sm">Advance to the next page</p>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex items-start mb-4">
                                <div class="nav-icon">
                                    <i class="fas fa-volume-up text-red-600"></i>
                                </div>
                                <div>
                                    <p class="font-bold">Sound Toggle</p>
                                    <p class="text-sm">Turn sound effects on/off</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <div class="nav-icon">
                                    <i class="fas fa-home text-red-600"></i>
                                </div>
                                <div>
                                    <p class="font-bold">Home Button</p>
                                    <p class="text-sm">Return to the beginning</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="speech-bubble speech-bubble-info-blue">
                        <p><span class="font-bold">Progress Tracking:</span></p>
                        <div class="flex items-center mt-2">
                            <div class="progress-bar rounded-full flex-1 mr-2">
                                <div class="progress-fill rounded-full" style="width: 10%"></div>
                            </div>
                            <span class="text-sm font-bold">10%</span>
                        </div>
                        <p class="mt-2 text-sm">The progress bar shows how far you've gone in the training.</p>
                    </div>
                    
                    <div class="speech-bubble speech-bubble-positive">
                        <p><span class="sound-effect">GANBATTE!</span> <span class="font-bold">Ready to begin?</span></p>
                        <p>Click "Next" below to start learning about phishing awareness!</p>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-between"> <!-- Added Back button -->
                    <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                        <i class="fas fa-arrow-left mr-2"></i> Back
                    </button>
                    <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Page 3 - Introduction (Old Page 2) -->
            <div id="page3" class="manga-panel p-6 hidden"> <!-- Was page2 -->
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-3xl font-bold manga-title text-red-600">Chapter 1: Introduction</h2>
                    <span class="page-number-span">Page 1</span> <!-- Updated span -->
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="img/Sensei_intro.png" alt="Sensei, with a friendly smile and open posture, ready to guide us" class="character-portrait rounded-md border-2 border-[#003366] shadow-md">
                            <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                <p class="font-bold">Sensei:</p>
                                <p>"Welcome, students! Today we'll learn about phishing awareness to protect ourselves online!"</p>
                            </div>
                        </div>
                        <!-- Removed large image: <img src="img/Sensei.png" alt="Teacher character" class="w-full character"> -->
                    </div>
                    <div>
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="img/Student_confused.png" alt="A TCC student, initially curious and a bit puzzled by 'phishing'." class="character-portrait rounded-md border-2 border-[#003366] shadow-md">
                            <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                <p class="font-bold">Student:</p>
                                <p>"Phishing? Like fishing? But we're not near any water..."</p>
                            </div>
                        </div>
                        <div class="speech-bubble speech-bubble-info-gold">
                            <p><span class="sound-effect">KON!</span> <span class="font-bold">Phishing Awareness and Training</span></p>
                            <p>Phishing is when criminals try to trick you into giving them sensitive information by pretending to be someone you trust.</p>
                        </div>
                        <!-- Removed large image: <img src="img/Student.png" alt="Confused student" class="w-full mt-4 character"> -->
                    </div>
                </div>
                
                <div class="mt-6 flex justify-between">
                    <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                        <i class="fas fa-arrow-left mr-2"></i> Back
                    </button>
                    <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Page 4 - Module 1 Part 1 (Old Page 3) -->
            <div id="page4" class="manga-panel p-6 hidden"> <!-- Was page3 -->
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-3xl font-bold manga-title text-red-600">Module 1: Why Students Need Phishing Awareness</h2>
                    <span class="page-number-span">Page 2</span> <!-- Updated span -->
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="img/Sensei_page2.png" alt="Sensei, looking thoughtful, emphasizing the importance of awareness." class="character-portrait rounded-md border-2 border-[#003366] shadow-md">
                            <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                <p class="font-bold">Sensei:</p>
                                <p>"Students are prime targets because we often have access to valuable information and may be less cautious!"</p>
                            </div>
                        </div>
                        <!-- Removed large image: <img src="img/Sensei.png" alt="Teacher character" class="w-full character"> -->
                    </div>
                    <div>
                        <div class="speech-bubble speech-bubble-alert mb-4">
                            <p><span class="sound-effect">DOKAN!</span> <span class="font-bold">Did You Know?</span></p>
                            <p>Over 90% of cyber attacks start with phishing emails. Students are targeted 3x more than faculty!</p>
                        </div>
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="img/Student_Module 1 Part 1.png" alt="The student, expressing a common concern about being targeted" class="character-portrait rounded-md border-2 border-[#003366] shadow-md">
                            <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                <p class="font-bold">Student:</p>
                                <p>"But I don't have anything valuable... why would they target me?"</p>
                            </div>
                        </div>
                        <div class="speech-bubble speech-bubble-info-blue">
                            <p>Your student account can be used to access:</p>
                            <ul class="list-disc pl-5 mt-2">
                                <li>School networks</li>
                                <li>Personal information</li>
                                <li>Financial aid details</li>
                                <li>And more!</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-between">
                    <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                        <i class="fas fa-arrow-left mr-2"></i> Back
                    </button>
                    <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Page 5 - Module 1 Part 2 (Old Page 4) -->
            <div id="page5" class="manga-panel p-6 hidden"> <!-- Was page4 -->
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-3xl font-bold manga-title text-red-600">Module 1: What Does a Phishing Email Look Like?</h2>
                    <span class="page-number-span">Page 3</span> <!-- Updated span -->
                </div>
                
                <div class="grid grid-cols-1 gap-6">
                    <div class="speech-bubble speech-bubble-info-gold mb-4">
                        <p><span class="sound-effect">GACHAN!</span> <span class="font-bold">Phishing Email Example</span></p>
                    </div>
                    
                    <div class="border-2 border-dashed border-gray-400 p-4 bg-gray-100">
                        <div class="flex justify-between items-center border-b border-gray-400 pb-2 mb-2">
                            <p class="font-bold">From: "TCC Support" &lt;support@tcc-fake.com&gt;</p>
                            <p class="text-sm">Today, 10:15 AM</p>
                        </div>
                        <p class="font-bold text-lg mb-2">URGENT: Your account will be suspended!</p>
                        <p class="mb-4">Dear Student,</p>
                        <p class="mb-4">We detected unusual activity on your account. To prevent suspension, please verify your credentials immediately:</p>
                        <a href="#" id="verifyLinkPhishingExample" class="manga-btn inline-block px-4 py-2 mb-4">Click Here to Verify</a>
                        <p class="text-sm text-gray-600">If you don't verify within 24 hours, your account will be permanently suspended.</p>
                        <p class="mt-4">Sincerely,<br>TCC Support Team</p>
                    </div>
                    
                    <div class="speech-bubble speech-bubble-alert mt-4">
                        <p><span class="font-bold">Red Flags:</span></p>
                        <ol class="list-decimal pl-5 mt-2">
                            <li>Urgent language and threats</li>
                            <li>Generic greeting ("Dear Student")</li>
                            <li>Suspicious sender email</li>
                            <li>Request for credentials</li>
                        </ol>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 6 - Quiz 1 (Old Page 5) -->
                <div id="page6" class="manga-panel p-6 hidden"> <!-- Was page5 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Module 1 Quiz</h2>
                        <span class="page-number-span">Page 4</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <div class="speech-bubble speech-bubble-info-blue">
                            <p><span class="sound-effect">PIKAN!</span> <span class="font-bold">Test Your Knowledge</span></p>
                            <p>Answer these questions to check your understanding!</p>
                        </div>
                        
                        <div class="quiz-question mb-6">
                            <p class="font-bold mb-3">1. Why are students common targets for phishing attacks?</p>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q1" value="A" class="form-radio border-gray-400">
                                    <span>A) Students are more likely to click on suspicious links</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q1" value="B" class="form-radio border-gray-400">
                                    <span>B) Student accounts can provide access to valuable information</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q1" value="C" class="form-radio border-gray-400">
                                    <span>C) Students are less likely to report phishing attempts</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q1" value="D" class="form-radio border-gray-400">
                                    <span>D) All of the above</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="quiz-question mb-6">
                            <p class="font-bold mb-3">2. Which of these is NOT a red flag in a phishing email?</p>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q2" value="A" class="form-radio border-gray-400">
                                    <span>A) Urgent language demanding immediate action</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q2" value="B" class="form-radio border-gray-400">
                                    <span>B) A request to verify your account credentials</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q2" value="C" class="form-radio border-gray-400">
                                    <span>C) Coming from an official TCC email address</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q2" value="D" class="form-radio border-gray-400">
                                    <span>D) Generic greeting like "Dear Student"</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <div class="speech-bubble speech-bubble-info-gold">
                                <p>Check your answers before proceeding!</p>
                            </div>
                            <div>
                                <button id="submitQuiz1Btn" onclick="checkQuiz(1)" class="manga-btn px-6 py-2 rounded-md font-bold">
                                    Submit <i class="fas fa-check ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold disabled:opacity-50" id="quiz1Next" disabled>
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 7 - Module 2 Part 1 (Old Page 6) -->
                <div id="page7" class="manga-panel p-6 hidden"> <!-- Was page6 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Module 2: Spotting the Red Flags</h2>
                        <span class="page-number-span">Page 5</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex items-start space-x-3 mb-4">
                                <img src="img/Sensei_Module 2 Part 1.png" alt="Sensei, confidently presenting the red flags to watch out for" class="character-portrait rounded-md border-2 border-[#003366] shadow-md">
                                <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                    <p class="font-bold">Sensei:</p>
                                    <p>"Let's learn how to spot phishing attempts before they can harm us!"</p>
                                </div>
                            </div>
                            <!-- Removed large image: <img src="img/Sensei.png" alt="Teacher character" class="w-full character"> -->
                        </div>
                        <div>
                            <div class="speech-bubble speech-bubble-positive mb-4">
                                <p><span class="sound-effect">SHAN!</span> <span class="font-bold">Red Flag Checklist</span></p>
                                <ul class="list-disc pl-5 mt-2">
                                    <li>Unexpected requests for personal info</li>
                                    <li>Spelling/grammar mistakes</li>
                                    <li>Suspicious links or attachments</li>
                                    <li>Urgent or threatening language</li>
                                    <li>Sender address doesn't match organization</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 8 - Module 2 Part 2 (Old Page 7) -->
                <div id="page8" class="manga-panel p-6 hidden"> <!-- Was page7 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Module 2: Safe Practices for Students</h2>
                        <span class="page-number-span">Page 6</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <div class="speech-bubble speech-bubble-info-blue mb-4">
                            <p><span class="sound-effect">DOKI DOKI!</span> <span class="font-bold">Protect Yourself!</span></p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="speech-bubble">
                                <p class="font-bold mb-2">✅ DO:</p>
                                <ul class="list-disc pl-5">
                                    <li>Verify sender email addresses</li>
                                    <li>Hover over links before clicking</li>
                                    <li>Use multi-factor authentication</li>
                                    <li>Keep software updated</li>
                                </ul>
                            </div>
                            
                            <div class="speech-bubble speech-bubble-alert">
                                <p class="font-bold mb-2">❌ DON'T:</p>
                                <ul class="list-disc pl-5">
                                    <li>Share passwords or personal info</li>
                                    <li>Click on suspicious links/attachments</li>
                                    <li>Respond to urgent requests without verifying</li>
                                    <li>Use the same password for multiple accounts</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="speech-bubble speech-bubble-info-gold mt-4">
                            <p><span class="font-bold">Pro Tip:</span> If an email seems suspicious, contact the organization directly using a phone number or email from their official website - not the contact info in the suspicious email!</p>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 9 - Quiz 2 (Old Page 8) -->
                <div id="page9" class="manga-panel p-6 hidden"> <!-- Was page8 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Module 2 Quiz</h2>
                        <span class="page-number-span">Page 7</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <div class="speech-bubble speech-bubble-info-blue">
                            <p><span class="sound-effect">PIKAN!</span> <span class="font-bold">Test Your Knowledge</span></p>
                            <p>Answer these questions to check your understanding!</p>
                        </div>
                        
                        <div class="quiz-question mb-6">
                            <p class="font-bold mb-3">1. What should you do if you receive an email asking you to verify your account by clicking a link?</p>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q3" value="A" class="form-radio border-gray-400">
                                    <span>A) Click the link and verify your account</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q3" value="B" class="form-radio border-gray-400">
                                    <span>B) Forward the email to IT support for verification</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q3" value="C" class="form-radio border-gray-400">
                                    <span>C) Reply to the email asking if it's legitimate</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q3" value="D" class="form-radio border-gray-400">
                                    <span>D) Ignore it completely</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="quiz-question mb-6">
                            <p class="font-bold mb-3">2. Which of these is the safest practice when dealing with suspicious emails?</p>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q4" value="A" class="form-radio border-gray-400">
                                    <span>A) Hover over links to see the actual URL</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q4" value="B" class="form-radio border-gray-400">
                                    <span>B) Use the contact information in the email to verify</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q4" value="C" class="form-radio border-gray-400">
                                    <span>C) Open attachments in a sandbox environment</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q4" value="D" class="form-radio border-gray-400">
                                    <span>D) Forward to all your friends to warn them</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <div class="speech-bubble speech-bubble-info-gold">
                                <p>Check your answers before proceeding!</p>
                            </div>
                            <div>
                                <button id="submitQuiz2Btn" onclick="checkQuiz(2)" class="manga-btn px-6 py-2 rounded-md font-bold">
                                    Submit <i class="fas fa-check ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold disabled:opacity-50" id="quiz2Next" disabled>
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 10 - Module 3 (Old Page 9) -->
                <div id="page10" class="manga-panel p-6 hidden"> <!-- Was page9 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Module 3: Reporting Phishing at TCC</h2>
                        <span class="page-number-span">Page 8</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex items-start space-x-3 mb-4">
                                <img src="img/Sensei_Module 3.png" alt="Sensei, clearly outlining the official TCC reporting procedures." class="character-portrait rounded-md border-2 border-[#003366] shadow-md">
                                <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                    <p class="font-bold">Sensei:</p>
                                    <p>"If you spot a phishing attempt, it's crucial to report it properly to protect others!"</p>
                                </div>
                            </div>
                            <!-- Removed large image: <img src="img/Sensei.png" alt="Teacher character" class="w-full character"> -->
                        </div>
                        <div>
                            <div class="speech-bubble speech-bubble-positive mb-4">
                                <p><span class="sound-effect">BANZAI!</span> <span class="font-bold">How to Report:</span></p>
                                <ol class="list-decimal pl-5 mt-2">
                                    <li><strong>Don't</strong> click any links or reply</li>
                                    <li>Forward the email to <strong>ITHelpDesk@tacomacc.edu</strong></li>
                                    <li>Include full email headers if possible</li>
                                    <li>Delete the email after reporting</li>
                                </ol>
                            </div>
                            
                            <div class="speech-bubble speech-bubble-info-blue">
                                <p><span class="font-bold">Remember:</span> Reporting phishing helps IT identify new threats and protect the entire TCC community!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 11 - Quiz 3 (Old Page 10) -->
                <div id="page11" class="manga-panel p-6 hidden"> <!-- Was page10 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Module 3 Quiz</h2>
                        <span class="page-number-span">Page 9</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <div class="speech-bubble speech-bubble-info-blue">
                            <p><span class="sound-effect">PIKAN!</span> <span class="font-bold">Final Challenge!</span></p>
                            <p>Answer these questions to complete your training!</p>
                        </div>
                        
                        <div class="quiz-question mb-6">
                            <p class="font-bold mb-3">1. What should you do with a phishing email after reporting it?</p>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q5" value="A" class="form-radio border-gray-400">
                                    <span>A) Keep it as evidence</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q5" value="B" class="form-radio border-gray-400">
                                    <span>B) Forward it to friends to warn them</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q5" value="C" class="form-radio border-gray-400">
                                    <span>C) Delete it</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q5" value="D" class="form-radio border-gray-400">
                                    <span>D) Reply with "Stop sending me spam"</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="quiz-question mb-6">
                            <p class="font-bold mb-3">2. Where should TCC students forward phishing emails?</p>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q6" value="A" class="form-radio border-gray-400">
                                    <span>A) ITHelpDesk@tacomacc.edu</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q6" value="B" class="form-radio border-gray-400">
                                    <span>B) Their professor</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q6" value="C" class="form-radio border-gray-400">
                                    <span>C) The sender asking if it's legitimate</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="q6" value="D" class="form-radio border-gray-400">
                                    <span>D) The IT help desk phone number</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <div class="speech-bubble speech-bubble-info-gold">
                                <p>Check your answers before completing the training!</p>
                            </div>
                            <div>
                                <button id="submitQuiz3Btn" onclick="checkQuiz(3)" class="manga-btn px-6 py-2 rounded-md font-bold">
                                    Submit <i class="fas fa-check ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button onclick="nextPage()" class="manga-btn px-6 py-2 rounded-md font-bold disabled:opacity-50" id="quiz3Next" disabled>
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Page 12 - Final Thoughts (Old Page 11) -->
                <div id="page12" class="manga-panel p-6 hidden"> <!-- Was page11 -->
                    <div class="flex justify-between items-start mb-6">
                        <h2 class="text-3xl font-bold manga-title text-red-600">Final Thoughts</h2>
                        <span class="page-number-span">Page 10</span> <!-- Updated span -->
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex items-start space-x-3 mb-4">
                                <img src="img/Sensei_Final Thoughts.png" alt="Sensei, smiling proudly, congratulating us on completing the training." class="w-24 h-auto block rounded-md border-2 border-[#003366] shadow-md">
                                <div class="speech-bubble speech-bubble-with-portrait portrait-left">
                                    <p class="font-bold">Sensei:</p>
                                    <p>"You've completed your phishing awareness training! Remember to stay vigilant!"</p>
                                </div>
                            </div>
                            <!-- Removed large image: <img src="img/Sensei.png" alt="Teacher character" class="w-full character"> -->
                        </div>
                        <div>
                            <div class="speech-bubble speech-bubble-positive mb-4">
                                <p><span class="sound-effect">YATTA!</span> <span class="font-bold">Key Takeaways:</span></p>
                                <ul class="list-disc pl-5 mt-2">
                                    <li>Always verify suspicious emails</li>
                                    <li>Never share personal information</li>
                                    <li>Report phishing attempts to IT</li>
                                    <li>Stay updated on new threats</li>
                                </ul>
                            </div>
                            
                            <div class="speech-bubble speech-bubble-info-gold">
                                <p><span class="font-bold">Call to Action:</span> Put your knowledge into practice! The next time you get a suspicious email, remember what you learned today.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 text-center">
                        <img src="img/T-Swoosh.png" alt="TCC Logo" class="w-1/4 mx-auto mb-4">
                        <div class="speech-bubble speech-bubble-info-blue inline-block">
                            <p class="text-2xl font-bold">Thank you for completing the Phishing Awareness Manga!</p>
                        </div>
                        <div class="mt-6">
                            <img src="img/Student_endingPage.png" alt="A TCC student, now informed and confident after the training!" class="w-32 mx-auto rounded-md border-2 border-[#003366] shadow-md">
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-between">
                        <button onclick="prevPage()" class="manga-btn px-6 py-2 rounded-md font-bold">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button id="completeTrainingBtn" class="manga-btn px-6 py-2 rounded-md font-bold">
                            Complete Training <i class="fas fa-certificate ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    <div id="senseiPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-[100]">
        <div class="manga-panel p-6 bg-white max-w-md w-11/12 md:w-full relative shadow-xl rounded-lg">
            <button id="closePopupBtn" class="absolute top-2 right-3 text-3xl font-bold text-gray-700 hover:text-red-600" aria-label="Close pop-up">&times;</button>
            <img src="img/Sensei_page3.png" alt="Sensei" class="w-1/3 mx-auto mb-4 rounded-md border-2 border-[#003366] shadow-md">
            <h3 class="text-2xl font-bold manga-title text-red-600 mb-3 text-center">Hold On There!</h3>
            <div class="speech-bubble speech-bubble-info-gold text-sm md:text-base">
                <p><span class="font-bold">Sensei says:</span> "This looks like a classic phishing attempt! Notice these red flags:</p>
                <ul class="list-disc pl-5 mt-2">
                    <li>The sender's email address (support@tcc-fake.com) looks suspicious and isn't an official TCC domain.</li>
                    <li>It uses urgent language ('URGENT', 'account will be suspended') to pressure you.</li>
                    <li>It asks you to click a link to 'verify credentials'. Real organizations rarely do this directly via email for security reasons.</li>
                </ul>
                <p class="mt-2">Always be cautious and verify such requests through official channels, not by clicking links in suspicious emails!"</p>
            </div>
        </div>
    </div>

    <div id="quizFeedbackPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-[100]">
        <div class="manga-panel p-6 bg-white max-w-lg w-11/12 md:w/full relative shadow-xl rounded-lg">
            <button id="closeQuizFeedbackBtn" class="absolute top-2 right-3 text-3xl font-bold text-gray-700 hover:text-red-600" aria-label="Close quiz feedback">&times;</button>
            <img id="quizFeedbackSenseiImage" src="img/Sensei.png" alt="Sensei" class="w-1/4 mx-auto mb-4 rounded-md border-2 border-[#003366] shadow-md">
            <h3 id="quizFeedbackTitle" class="text-2xl font-bold manga-title text-red-600 mb-3 text-center">Quiz Results!</h3>
            <div id="quizFeedbackMessage" class="speech-bubble speech-bubble-info-gold text-sm md:text-base mb-3">
                <!-- Sensei's message will go here -->
            </div>
            <p id="currentQuizScoreDisplay" class="text-center font-bold mb-1"></p>
            <p id="overallScoreDisplay" class="text-center font-bold mb-4"></p>
        </div>
    </div>

    <!-- Completion Pop-up -->
    <div id="completionPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-[100]">
        <div class="manga-panel p-6 bg-white max-w-lg w-11/12 md:w/full relative shadow-xl rounded-lg text-center">
            <img src="img/Sensei.png" alt="Sensei" class="w-1/3 mx-auto mb-4 rounded-md border-2 border-[#003366] shadow-md">
            <h3 class="text-2xl font-bold manga-title mb-3">Congratulations! Training Complete!</h3>
            <div class="speech-bubble speech-bubble-info-gold text-sm md:text-base mb-4">
                <p><span class="sound-effect">YATTA!</span> Sensei says: "You have successfully completed the TCC Phishing Awareness Manga Training! Your efforts in learning to protect yourself and the TCC community are greatly appreciated!"</p>
            </div>
            <p id="finalScoreDisplay" class="font-bold mb-4"></p>
            <p class="text-xs mb-4">Your completion has been noted.</p>
            <button id="closeCompletionPopupBtn" class="manga-btn px-6 py-2 rounded-md font-bold">Close</button>
        </div>
    </div>

    <div id="resetConfirmPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-[100]">
        <div class="manga-panel p-6 bg-white max-w-md w-11/12 md:w/full relative shadow-xl rounded-lg">
            <h3 class="text-2xl font-bold manga-title text-red-600 mb-4 text-center">Confirm Reset</h3>
            <p class="text-center mb-6">Are you sure you want to return to the start? All your quiz progress and scores will be lost.</p>
            <div class="flex justify-around">
                <button id="confirmResetProgressBtn" class="manga-btn px-6 py-2 rounded-md font-bold bg-red-600 hover:bg-red-700 text-white">Confirm Reset</button>
                <button id="cancelResetProgressBtn" class="manga-btn px-6 py-2 rounded-md font-bold bg-gray-300 text-gray-700 hover:bg-gray-400">Cancel</button>
            </div>
        </div>
    </div>

    <footer>
        Tacoma Community College 
        <br>&copy; 2024-2025 TCC Phishing Awareness Training. All Rights Reserved.
    </footer>

        <script>
            let currentPage = 1;
            const totalPages = 12; // Updated total pages
            const bgAudio = document.getElementById('bgAudio');
            const soundToggleBtn = document.getElementById('soundToggle');
            const volumeSlider = document.getElementById('volumeSlider');
            const nextPageSound = document.getElementById('nextPageSound');
            const prevPageSound = document.getElementById('prevPageSound');
            const homeNavButton = document.getElementById('homeNavButton');
            const verifyLinkPhishingExample = document.getElementById('verifyLinkPhishingExample');
            const senseiPopup = document.getElementById('senseiPopup');
            const closePopupBtn = document.getElementById('closePopupBtn');
            const quizFeedbackPopup = document.getElementById('quizFeedbackPopup');
            const closeQuizFeedbackBtn = document.getElementById('closeQuizFeedbackBtn');
            const quizFeedbackTitle = document.getElementById('quizFeedbackTitle');
            const quizFeedbackMessage = document.getElementById('quizFeedbackMessage');
            const currentQuizScoreDisplay = document.getElementById('currentQuizScoreDisplay');
            const overallScoreDisplay = document.getElementById('overallScoreDisplay');
            const resetConfirmPopup = document.getElementById('resetConfirmPopup');
            const confirmResetProgressBtn = document.getElementById('confirmResetProgressBtn');
            const cancelResetProgressBtn = document.getElementById('cancelResetProgressBtn');
            const completeTrainingBtn = document.getElementById('completeTrainingBtn');
            const completionPopup = document.getElementById('completionPopup');
            const closeCompletionPopupBtn = document.getElementById('closeCompletionPopupBtn');
            const finalScoreDisplay = document.getElementById('finalScoreDisplay');

            const correctAnswers = {
                1: { q1: 'D', q2: 'C' }, // Quiz 1: Q1 maps to name="q1", Q2 to name="q2"
                2: { q3: 'B', q4: 'A' }, // Quiz 2: Q1 maps to name="q3", Q2 to name="q4"
                3: { q5: 'C', q6: 'A' }  // Quiz 3: Q1 maps to name="q5", Q2 to name="q6"
            };

            const questionsPerQuiz = {
                1: ['q1', 'q2'],
                2: ['q3', 'q4'],
                3: ['q5', 'q6']
            };
            
            let quizScores = {
                1: { correct: 0, attempted: false, totalQuestions: questionsPerQuiz[1].length },
                2: { correct: 0, attempted: false, totalQuestions: questionsPerQuiz[2].length },
                3: { correct: 0, attempted: false, totalQuestions: questionsPerQuiz[3].length }
            };
            
            const totalQuizQuestionsOverall = Object.values(questionsPerQuiz).flat().length;


            // --- Add this NEW helper function ---
            function updateSoundButtonAppearance() {
                const isPlayingAndAudible = !bgAudio.paused && bgAudio.volume > 0;

                if (isPlayingAndAudible) {
                    soundToggleBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    soundToggleBtn.classList.add('unmuted-flashy');
                } else {
                    // Covers paused OR volume is 0
                    soundToggleBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    soundToggleBtn.classList.remove('unmuted-flashy');
                }
            }


            // Initialize page
            document.addEventListener('DOMContentLoaded', function() {
                bgAudio.volume = 0.3; // Set initial volume
                volumeSlider.value = bgAudio.volume;

                showPage(currentPage); // Show initial page (new page 1)
                updateProgress(); // Call after showPage to reflect initial state correctly
                updatePageCount(); // Call after showPage
                
                // --- REVISED soundToggleBtn Click Listener ---
                soundToggleBtn.addEventListener('click', function() {
                    if (bgAudio.paused) {
                        bgAudio.play().catch(e => console.log("Error playing bgAudio:", e));
                    } else {
                        bgAudio.pause();
                    }
                    updateSoundButtonAppearance();
                });

                // --- REVISED volumeSlider Input Listener ---
                volumeSlider.addEventListener('input', function() {
                    bgAudio.volume = this.value;
                    updateSoundButtonAppearance();
                });

                // --- REVISED Autoplay Logic ---
                const playAudioAfterUserInteraction = () => {
                    // Check if audio is still paused (i.e., autoplay failed and it hasn't been manually started/unmuted)
                    if (bgAudio.paused) {
                        bgAudio.play().then(() => {
                            console.log("Background audio started after user interaction.");
                            updateSoundButtonAppearance(); // Ensure button updates
                        }).catch(e => {
                            // Log if it still fails, though at this point it's less likely if interaction occurred.
                            console.error("Error attempting to play background audio after user interaction:", e);
                        });
                    }
                    // Event listeners with { once: true } automatically remove themselves after firing once.
                };

                bgAudio.play().then(() => {
                    console.log("Autoplay successful");
                    updateSoundButtonAppearance();
                }).catch(error => {
                    console.log("Autoplay prevented initially:", error);
                    // If autoplay is prevented, set up listeners for the first user interaction.
                    // These listeners will only fire once.
                    document.addEventListener('click', playAudioAfterUserInteraction, { once: true });
                    document.addEventListener('keydown', playAudioAfterUserInteraction, { once: true });
                    document.addEventListener('touchstart', playAudioAfterUserInteraction, { once: true });
                    updateSoundButtonAppearance(); // Ensure button reflects paused state if autoplay failed
                });

                // --- RECOMMENDED: Add direct audio event listeners for robustness ---
                bgAudio.addEventListener('play', updateSoundButtonAppearance);
                bgAudio.addEventListener('pause', updateSoundButtonAppearance);
                bgAudio.addEventListener('volumechange', updateSoundButtonAppearance);

                // Initialize button appearance on load *after* potential autoplay attempt
                updateSoundButtonAppearance();

                // Home Button Navigation
                if (homeNavButton) {
                    homeNavButton.addEventListener('click', function() {
                        // Show confirmation if beyond welcome/tutorial or if any quiz has been attempted
                        if (currentPage > 2 || quizScores[1].attempted || quizScores[2].attempted || quizScores[3].attempted) {
                            if (resetConfirmPopup) resetConfirmPopup.classList.remove('hidden');
                        } else {
                            resetAllProgressAndScores();
                        }
                    });
                }

                // Phishing example link pop-up
                if (verifyLinkPhishingExample) {
                    verifyLinkPhishingExample.addEventListener('click', function(event) {
                        event.preventDefault(); // Prevent default link behavior
                        if (senseiPopup) {
                            senseiPopup.classList.remove('hidden');
                        }
                    });
                }

                // Close Sensei Pop-up
                if (closePopupBtn) {
                    closePopupBtn.addEventListener('click', function() {
                        if (senseiPopup) {
                            senseiPopup.classList.add('hidden');
                        }
                    });
                }

                // Close Quiz Feedback Pop-up
                if (closeQuizFeedbackBtn) {
                    closeQuizFeedbackBtn.addEventListener('click', () => {
                        if (quizFeedbackPopup) quizFeedbackPopup.classList.add('hidden');
                    });
                }

                // Close Pop-up if clicking outside of it (optional UX improvement)
                if (senseiPopup) {
                    senseiPopup.addEventListener('click', function(event) {
                        if (event.target === senseiPopup) { // Check if the click is on the backdrop itself
                            senseiPopup.classList.add('hidden');
                        }
                    });
                }

                // Reset Confirmation Pop-up listeners
                if (confirmResetProgressBtn) {
                    confirmResetProgressBtn.addEventListener('click', function() {
                        resetAllProgressAndScores();
                        if (resetConfirmPopup) {
                            resetConfirmPopup.classList.add('hidden');
                        }
                    });
                }
                if (cancelResetProgressBtn) {
                    cancelResetProgressBtn.addEventListener('click', function() {
                        if (resetConfirmPopup) {
                            resetConfirmPopup.classList.add('hidden');
                        }
                    });
                }
                 if (resetConfirmPopup) {
                    resetConfirmPopup.addEventListener('click', function(event) {
                        if (event.target === resetConfirmPopup) { // Click on backdrop
                            resetConfirmPopup.classList.add('hidden');
                        }
                    });
                }

                // Complete Training Button
                if (completeTrainingBtn) {
                    completeTrainingBtn.addEventListener('click', function() {
                        // Calculate final score to display
                        let totalCorrectOverall = 0;
                        Object.values(quizScores).forEach(scoreInfo => {
                            if (scoreInfo.attempted) {
                                totalCorrectOverall += scoreInfo.correct;
                            }
                        });
                        finalScoreDisplay.textContent = `Your Final Score: ${totalCorrectOverall} / ${totalQuizQuestionsOverall} Correct`;
                        
                        if (completionPopup) {
                            completionPopup.classList.remove('hidden');
                        }
                        // Optionally disable other nav like home button here, or the completeTrainingBtn itself
                        // completeTrainingBtn.disabled = true;
                        // if(homeNavButton) homeNavButton.disabled = true; 
                    });
                }

                // Close Completion Pop-up
                if (closeCompletionPopupBtn) {
                    closeCompletionPopupBtn.addEventListener('click', function() {
                        if (completionPopup) {
                            completionPopup.classList.add('hidden');
                        }
                    });
                }
                 if (completionPopup) {
                    completionPopup.addEventListener('click', function(event) {
                        if (event.target === completionPopup) { // Click on backdrop
                            completionPopup.classList.add('hidden');
                        }
                    });
                }
            });

            function showPage(pageNumber) {
                document.getElementById(`page${currentPage}`).classList.add('hidden');
                // Ensure all other pages are hidden (belt and braces for complex scenarios)
                for (let i = 1; i <= totalPages; i++) {
                    const pageEl = document.getElementById(`page${i}`);
                    if (pageEl && i !== pageNumber) {
                        pageEl.classList.add('hidden');
                    }
                }

                currentPage = pageNumber;
                const newPageElement = document.getElementById(`page${currentPage}`);
                newPageElement.classList.remove('hidden');
                newPageElement.classList.add('page-turn');
                setTimeout(() => {
                    newPageElement.classList.remove('page-turn');
                }, 500);
                updateProgress();
                updatePageCount();
                window.scrollTo(0, 0);
            }

            function nextPage() {
                if (currentPage < totalPages) {
                    nextPageSound.currentTime = 0; // Reset sound to beginning
                    nextPageSound.play().catch(e => console.log("Error playing nextPageSound:", e));
                    showPage(currentPage + 1);
                }
            }
            
            function prevPage() {
                if (currentPage > 1) {
                    prevPageSound.currentTime = 0; // Reset sound to beginning
                    prevPageSound.play().catch(e => console.log("Error playing prevPageSound:", e));
                    showPage(currentPage - 1);
                }
            }
            
            function updateProgress() {
                let progress;
                const progressTextElement = document.getElementById('progressText'); // Get the specific span for progress percentage

                if (totalPages <= 2) { 
                    progress = (currentPage > 1) ? ((currentPage -1) / (totalPages -1 )) * 100 : 0;
                } else if (currentPage === 1) { // Welcome page
                    progress = 0;
                } else if (currentPage === 2) { // Tutorial page
                    progress = 0; // Still 0% for tutorial, or a small fixed amount like 5 if preferred
                } else { // Actual content pages (page 3 to 12)
                    progress = ((currentPage - 2) / (totalPages - 2)) * 100;
                }
                
                document.getElementById('progressFill').style.width = `${progress}%`;
                
                if (progressTextElement) { // Check if element exists
                    progressTextElement.textContent = `${Math.round(progress)}% Complete`;
                }
            }
            
            function updatePageCount() {
                const pageCountElement = document.getElementById('pageCount');
                let displayPageInfo;

                if (currentPage === 1) {
                    displayPageInfo = "Welcome";
                } else if (currentPage === 2) {
                    displayPageInfo = "Tutorial";
                } else {
                    // For content pages (3-12), they represent logical pages 1-10
                    const contentPageNumber = currentPage - 2;
                    const totalContentPages = totalPages - 2;
                    displayPageInfo = `Page ${contentPageNumber} of ${totalContentPages}`;
                }
                pageCountElement.textContent = displayPageInfo;
            }

            function resetAllProgressAndScores() {
                for (const qNum in quizScores) {
                    if (quizScores.hasOwnProperty(qNum)) {
                        quizScores[qNum].correct = 0;
                        quizScores[qNum].attempted = false;
                        
                        const submitBtn = document.getElementById(`submitQuiz${qNum}Btn`);
                        if (submitBtn) {
                            submitBtn.disabled = false;
                        }
                        const nextBtn = document.getElementById(`quiz${qNum}Next`);
                        if (nextBtn) {
                            nextBtn.disabled = true;
                        }
                    }
                }
                // Reset overall score display if it's part of the UI outside the quiz pop-up
                // (Currently it's only in the pop-up, so this might not be needed here)
                // updateOverallScoreDisplay(); // You'd need a function to update this if it's always visible
                showPage(1); // This will also call updateProgress and updatePageCount
            }
            
            function checkQuiz(quizNumber) {
                const currentQuizQuestions = questionsPerQuiz[quizNumber];
                const currentQuizAnswers = correctAnswers[quizNumber];
                let currentScore = 0;
                let allQuestionsAnswered = true;

                currentQuizQuestions.forEach(questionName => {
                    const selectedAnswer = document.querySelector(`input[name="${questionName}\"]:checked`);
                    if (selectedAnswer) {
                        if (selectedAnswer.value === currentQuizAnswers[questionName]) {
                            currentScore++;
                        }
                    } else {
                        allQuestionsAnswered = false;
                    }
                });

                if (!allQuestionsAnswered) {
                    alert("Please answer all questions before submitting.");
                    return;
                }

                quizScores[quizNumber].correct = currentScore;
                quizScores[quizNumber].attempted = true;
                const totalQuestionsInQuiz = quizScores[quizNumber].totalQuestions;

                // Update quiz feedback popup content based on score
                const senseiImage = document.getElementById('quizFeedbackSenseiImage');
                const feedbackTitle = document.getElementById('quizFeedbackTitle');
                const feedbackMessage = document.getElementById('quizFeedbackMessage');

                if (currentScore === totalQuestionsInQuiz) { // High score
                    senseiImage.src = 'img/Sensei_HighScore.png';
                    feedbackTitle.textContent = 'Excellent Work!';
                    feedbackMessage.innerHTML = `<p><span class="sound-effect">YATTA!</span> Sensei says: "Outstanding! You've mastered this section. Keep up the great work!"</p>`;
                } else if (currentScore > 0) { // Medium score
                    senseiImage.src = 'img/Sensei_MediumScore.png';
                    feedbackTitle.textContent = 'Good Effort!';
                    feedbackMessage.innerHTML = `<p><span class="sound-effect">GANBATTE!</span> Sensei says: "You're getting there! Review the material and try to catch all the details next time."</p>`;
                } else { // Low score
                    senseiImage.src = 'img/Sensei_LowScore.png';
                    feedbackTitle.textContent = 'Needs Improvement';
                    feedbackMessage.innerHTML = `<p><span class="sound-effect">DONMAI!</span> Sensei says: "Hmm, this was a tricky one. Don't worry, review the concepts and you'll get it!"</p>`;
                }

                currentQuizScoreDisplay.textContent = `Your score for this quiz: ${currentScore}/${totalQuestionsInQuiz}`;
                
                let overallCorrect = 0;
                let overallAttemptedQuestions = 0;
                Object.values(quizScores).forEach(quiz => {
                    overallCorrect += quiz.correct;
                    if(quiz.attempted) { // only count questions from attempted quizzes towards overall total for fairness if user skips
                        overallAttemptedQuestions += quiz.totalQuestions;
                    }
                });
                // If not all quizzes attempted, show overall based on attempted, else show based on all possible questions
                const overallTotalDisplay = Object.values(quizScores).every(q => q.attempted) ? totalQuizQuestionsOverall : overallAttemptedQuestions;

                overallScoreDisplay.textContent = `Overall progress: ${overallCorrect}/${overallTotalDisplay} correct`;

                quizFeedbackPopup.classList.remove('hidden');
                document.getElementById(`quiz${quizNumber}Next`).disabled = false;
                document.getElementById(`submitQuiz${quizNumber}Btn`).disabled = true; 
                // Disable radio buttons after submission
                currentQuizQuestions.forEach(questionName => {
                    document.querySelectorAll(`input[name="${questionName}"]`).forEach(radio => {
                        radio.disabled = true;
                    });
                });
                updateProgress(); // Update progress bar after quiz
            }
        </script>
    </body>
    </html>
